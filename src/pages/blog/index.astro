---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat("ru-RU", {
    day: "numeric",
    month: "long",
    year: "numeric",
  }).format(date);
};
---

<Layout
  title="–ë–ª–æ–≥ ‚Äî –ö–µ–π—Å—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ | Roxend"
  description="–ö–µ–π—Å—ã –Ω–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤: —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–± –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –†–µ–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ –Ω–∞—à–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤."
>
  <section class="blog">
    <div class="blog-container">
      <div class="blog-header">
        <a href="/" class="back-link">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        <h1 class="blog-title">–ö–µ–π—Å—ã –ø—Ä–æ–µ–∫—Ç–æ–≤</h1>
        <p class="blog-subtitle">
          –†–µ–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞—à–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
        </p>
      </div>

      {
        posts.length > 0 ? (
          <div class="posts-grid">
            {posts.map((post) => (
              <a href={`/blog/${post.slug}`} class="post-card">
                {post.data.heroImage && (
                  <div class="post-image">
                    <img src={post.data.heroImage} alt={post.data.title} />
                  </div>
                )}
                <div class="post-content">
                  <div class="post-meta">
                    {post.data.industry && (
                      <span class="post-industry">{post.data.industry}</span>
                    )}
                    <time datetime={post.data.pubDate.toISOString()}>
                      {formatDate(post.data.pubDate)}
                    </time>
                  </div>
                  <h2 class="post-title">{post.data.title}</h2>
                  <p class="post-description">{post.data.description}</p>
                  {post.data.technologies && (
                    <div class="post-technologies">
                      {post.data.technologies.slice(0, 4).map((tech) => (
                        <span class="tech-tag">{tech}</span>
                      ))}
                    </div>
                  )}
                </div>
              </a>
            ))}
          </div>
        ) : (
          <div class="empty-state">
            <div class="empty-icon">üìù</div>
            <h2>–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è —Å—Ç–∞—Ç—å–∏</h2>
            <p>–ú—ã –≥–æ—Ç–æ–≤–∏–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∫–µ–π—Å—ã –Ω–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
          </div>
        )
      }
    </div>
  </section>
</Layout>

<style>
  .blog {
    max-width: 896px;
    margin: 0 auto;
    padding: 48px 16px;
    min-height: calc(100vh - 200px);
  }

  .blog-container {
    display: flex;
    flex-direction: column;
    gap: 48px;
  }

  .blog-header {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .back-link {
    font-size: 14px;
    color: #666666;
    text-decoration: none;
    transition: color 0.3s ease;
    width: fit-content;
  }

  .back-link:hover {
    color: #0a45c3;
  }

  .blog-title {
    font-size: 32px;
    font-weight: 700;
    color: #000000;
    margin: 0;
  }

  .blog-subtitle {
    font-size: 16px;
    color: #666666;
    margin: 0;
    line-height: 1.6;
  }

  .posts-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 24px;
  }

  .post-card {
    display: flex;
    flex-direction: column;
    background-color: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.08);
    border-radius: 20px;
    overflow: hidden;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .post-card:hover {
    border-color: rgba(0, 0, 0, 0.15);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    transform: translateY(-4px);
  }

  .post-image {
    width: 100%;
    height: 200px;
    overflow: hidden;
    background: linear-gradient(135deg, #f0f4ff 0%, #e8ecf4 100%);
  }

  .post-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .post-card:hover .post-image img {
    transform: scale(1.05);
  }

  .post-content {
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .post-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 13px;
    color: #888888;
  }

  .post-industry {
    background-color: #f0f4ff;
    color: #0a45c3;
    padding: 4px 10px;
    border-radius: 6px;
    font-weight: 500;
    font-size: 12px;
  }

  .post-title {
    font-size: 20px;
    font-weight: 700;
    color: #000000;
    margin: 0;
    line-height: 1.3;
  }

  .post-description {
    font-size: 14px;
    color: #666666;
    line-height: 1.6;
    margin: 0;
  }

  .post-technologies {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 8px;
  }

  .tech-tag {
    font-size: 12px;
    color: #666666;
    background-color: #f5f5f5;
    padding: 4px 8px;
    border-radius: 4px;
  }

  .empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 80px 24px;
    background-color: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.08);
    border-radius: 24px;
  }

  .empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
  }

  .empty-state h2 {
    font-size: 24px;
    font-weight: 700;
    color: #000000;
    margin: 0 0 8px 0;
  }

  .empty-state p {
    font-size: 16px;
    color: #666666;
    margin: 0;
  }

  /* Tablet */
  @media (min-width: 640px) {
    .blog {
      padding: 80px 24px;
    }

    .blog-container {
      gap: 64px;
    }

    .blog-title {
      font-size: 40px;
    }

    .blog-subtitle {
      font-size: 18px;
    }

    .posts-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 32px;
    }

    .post-image {
      height: 180px;
    }

    .post-content {
      padding: 28px;
    }

    .post-title {
      font-size: 22px;
    }

    .post-description {
      font-size: 15px;
    }
  }

  /* Desktop */
  @media (min-width: 1024px) {
    .posts-grid {
      gap: 32px;
    }

    .post-card {
      border-radius: 24px;
    }

    .post-image {
      height: 200px;
    }
  }
</style>



